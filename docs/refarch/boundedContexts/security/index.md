# Security BC

The security BC comprises a number of subsystems: 

1. Authentication (AuthN)
2. Authorization (AuthZ)


## Terms

Terms with specific and commonly accepted meaning within the Security Bounded Context.

| Crypto providers | Adapter that will provide cryptographic services and Key Management System |
|---|---|
| IAM | Identity and Access Management. Adapter that will provide services for menus, profiles, roles and permissions.  |


## Overview

The protocol is request and response based, and the used transport protocol is secure Hypertext Transfer Protocol Secure (HTTPS). All services use the HTTP POST and GET methods. Both the request and response bodies are encoded in JSON-formatted text.


![Use Case - Example REPLACE ME](./assets/securityBCv0.3.png)


## Use Cases

### Authentication (AuthN)

The login function requires the user id and a secret key passed in the http body. The response contains a signed JWT token. The signature is generated by the Crypto subsystem.
The login is performed by the IAM subsystem.

        
### Authoirzation (AuthZ)

Client Authorization should be performed by using an access token. A client first needs to request the Authorization Service to create an access token for the user who requests to access the interface. The user is authenticated in the Authorization Service. The created access token is then used for authorization in the interface. 
To use the access token, the client must set the Authorization HTTP header to Bearer [access_token] in each request to the interface.

### GetROLE

The getRole function to the security layer will return a ROLE from the IAM. The returned ROLE will be used by the microservices to verify permissions. 


### GetCertificate

The getCertificate function to the security layer will return a self signed certificate from the Cryptographic subsystem. The returned certificate will be used by the microservices to verify integrity Authorization Token signature. 

### Signature verification

Eliptic Curve Cryptography Signature Verification.


<!-- Footnotes themselves at the bottom. -->
## Notes

[^1]: Common Interfaces: [Mojaloop Common Interface List](../../commonInterfaces.md)
